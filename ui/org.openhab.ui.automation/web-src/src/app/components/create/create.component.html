<div *ngIf="step == 0" class="loader">
        <mat-progress-spinner
        color="primary"
        mode="indeterminate">
    </mat-progress-spinner>
</div>
<div *ngIf="step != 0" class="animate-from-right">
    <section>
      <mat-progress-bar
          color="primary"
          mode="determinate"
          [value]="(step - 1)*33.3333">
      </mat-progress-bar>
    </section>
</div>
<div [hidden]="step != 1" class="creatediv animate-from-right">
	<h2>Enter name and description</h2>
	<form>
		<mat-form-field style="width: 100%;"> <input #name matInput placeholder="Name" [formControl]="requiredFormControl" required [value]="rule.name"> <mat-error *ngIf="requiredFormControl.hasError('required')">Please enter value</mat-error></mat-form-field>
		<mat-form-field style="width: 100%;"> <textarea #desc matInput placeholder="Description" (keyup.enter)="saveNameAndDescription(name.value, desc.value); next();" [value]="rule.description"></textarea> </mat-form-field>
	</form>
	<div class="button-row">
        <button mat-raised-button (click)="cancel()">Cancel</button>
	    <button mat-raised-button color="primary" [disabled]="requiredFormControl.hasError('required')" (click)="saveNameAndDescription(name.value, desc.value); next();">Next</button>
	</div>
</div>
<div [hidden]="step != 2" class="creatediv animate-from-right">
	<div class="itemsdiv">
		<h2>Choose conditions</h2>
		<div class="conditions">
		  <div *ngIf="step == 2">
		    <app-items *ngFor="let condition of rule.conditions" [things]="things" [thingType]="'condition'" [mod]="condition" (ruleUpdated)="onRuleUpdated($event)"></app-items>
		  </div>
		  <app-items [things]="things" [thingType]="'condition'" (ruleUpdated)="onRuleUpdated($event)"></app-items>
		</div>
	</div>
	<div class="button-row">
	    <button mat-raised-button (click)="goBack()">Back</button>
	    <button mat-raised-button color="primary" [disabled]="isConditionsZero()" (click)="next()">Next</button>
	</div>
</div>
<div [hidden]="step != 3" class="creatediv animate-from-right">
	<div class="itemsdiv">
		<h2>Choose actions</h2>
		<div class="actions">
		  <div *ngIf="step == 3">
		      <app-items *ngFor="let action of rule.actions" [things]="thingsWithEditableItems" [thingType]="'action'" [mod]="action" (ruleUpdated)="onRuleUpdated($event)"></app-items>
          </div>
		  <app-items [things]="thingsWithEditableItems" [thingType]="'action'" (ruleUpdated)="onRuleUpdated($event)"></app-items>
		</div>
	</div>
    <div class="button-row">
        <button mat-raised-button (click)="goBack()">Back</button>
        <button mat-raised-button color="primary" [disabled]="isConditionsZero()" (click)="next()">Next</button>
    </div>
</div>
<div [hidden]="step != 4" class="creatediv animate-from-right">
    <h2>Overview</h2>
    <h3><b>Name:</b> {{rule.name}}</h3>
    <h3 *ngIf="rule.description"><b>Description:</b> {{rule.description}}</h3>
    <div class="button-row">
        <button mat-raised-button (click)="goBack()">Back</button>
        <button mat-raised-button color="primary" (click)="createRule()">Create</button>
    </div>
    <div #bodyJson></div>
</div>